buildscript {
    dependencies {
        classpath group: 'de.dynamicfiles.projects.gradle.plugins', name: 'javafx-gradle-plugin', version: '8.7.0'
    }
    repositories {
        mavenCentral()
    }
}

plugins {
    id 'java'
    id 'application'
    id 'maven-publish'
    id 'checkstyle'
    id 'idea'
    id 'edu.wpi.first.wpilib.versioning.WPILibVersioningPlugin' version '1.1'
}
apply plugin: 'javafx-gradle-plugin'

//publishing {
//    publications {
//        maven(MavenPublication) {
//            artifact(shadowJar) {
//                classifier null
//            }
//            groupId 'edu.wpi.first.wpilib.networktables'
//            artifactId 'OutlineViewer'
//            version WPILibVersion.version
//        }
//    }
//}

repositories {
    mavenCentral()
}

dependencies {
    compile group: 'com.google.guava', name: 'guava', version: '19.0'
    compile "edu.wpi.first.wpilib.networktables.java:NetworkTables:+:desktop"
    testCompile group: 'com.google.guava', name: 'guava-testlib', version: '19.0'
}

checkstyle {
    configFile = new File(rootDir, "checkstyle.xml")
    toolVersion = '6.19'
}

test {
    testLogging {
        if (project.hasProperty('logTests')) {
            events "started", "passed", "skipped", "failed"
        } else {
            events "failed"
        }
        exceptionFormat "full"
    }
}

jfx {
    jfxMainAppJarName = 'OutlineViewer.jar'
    mainClass = 'edu.wpi.first.outlineviewer.Main'
}

mainClassName = jfx.mainClass

task wrapper(type: Wrapper) {
    gradleVersion = '3.0'
}
